<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Venda de Ingressos</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 0.3s ease-in-out; }
        .ticket-page { border: 2px dashed #ccc; margin-bottom: 20px; padding: 40px; background: white; }
        
        @media print {
            @page { size: A4 portrait; margin: 0; }
            html, body { width: 210mm; height: 297mm; }
            body * { visibility: hidden; }
            .ticket-page, .ticket-page * { visibility: visible; }
            .ticket-page {
                position: relative; page-break-after: always; page-break-inside: avoid;
                border: none !important; margin: 0 !important; padding: 40px !important;
                width: 210mm; min-height: 297mm; box-sizing: border-box;
            }
            .ticket-page:last-child { page-break-after: auto; }
            .no-print-btn { display: none !important; }
            .print-content { position: static !important; overflow: visible !important; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
          const [screen, setScreen] = useState('login');
          const [email, setEmail] = useState('');
          const [password, setPassword] = useState('');
          const [user, setUser] = useState(null);
          const [cart, setCart] = useState({});
          const [payment, setPayment] = useState('');
          const [pixCode, setPixCode] = useState('');
          const [order, setOrder] = useState(null);
          const [customer, setCustomer] = useState({ name: '', phone: '', email: '', cpf: '' });
          const [showPrintModal, setShowPrintModal] = useState(false);
          const [orders, setOrders] = useState([]);
          const [tickets, setTickets] = useState([]);
          const [events, setEvents] = useState([]);
          const [selectedEvent, setSelectedEvent] = useState(null);
          const [editingTicket, setEditingTicket] = useState(null);
          const [newTicket, setNewTicket] = useState({ name: '', price: '', desc: '', eventId: null });
          const [editingEvent, setEditingEvent] = useState(null);
          const [newEvent, setNewEvent] = useState({ name: '', date: '', location: '', description: '' });
          const [loading, setLoading] = useState(true);
          const [successMessage, setSuccessMessage] = useState('');
          const [adminTab, setAdminTab] = useState('events');
          const [reportEventFilter, setReportEventFilter] = useState('all');

          const payments = [
            { id: 'credit', name: 'Cart√£o de Cr√©dito', icon: 'üí≥' },
            { id: 'debit', name: 'Cart√£o de D√©bito', icon: 'üí≥' },
            { id: 'pix', name: 'PIX', icon: 'üì±' }
          ];

          // Carregar dados do localStorage ao iniciar
          useEffect(() => {
            try {
              let loadedEvents = [];
              const savedEvents = localStorage.getItem('events');
              if (savedEvents) {
                loadedEvents = JSON.parse(savedEvents);
                setEvents(loadedEvents);
              } else {
                // Criar evento padr√£o se n√£o houver nenhum
                const defaultEvent = {
                  id: 1,
                  name: 'Campeonato Amazonense',
                  date: '07 de Fevereiro de 2025 - 20h',
                  location: 'Parque de Exposi√ß√µes - Av. Principal, 1000',
                  description: 'Grande final do campeonato'
                };
                loadedEvents = [defaultEvent];
                setEvents(loadedEvents);
              }

              const savedTickets = localStorage.getItem('tickets');
              if (savedTickets) {
                let loadedTickets = JSON.parse(savedTickets);
                // Migra√ß√£o: adicionar eventId aos tickets antigos
                loadedTickets = loadedTickets.map(ticket => {
                  if (!ticket.eventId && loadedEvents.length > 0) {
                    return { ...ticket, eventId: loadedEvents[0].id };
                  }
                  return ticket;
                });
                setTickets(loadedTickets);
              }

              const savedOrders = localStorage.getItem('orders');
              if (savedOrders) {
                let loadedOrders = JSON.parse(savedOrders);
                // Migra√ß√£o: adicionar event.id aos pedidos antigos
                loadedOrders = loadedOrders.map(order => {
                  if (order.event && !order.event.id && loadedEvents.length > 0) {
                    return { 
                      ...order, 
                      event: { 
                        ...order.event, 
                        id: loadedEvents[0].id,
                        location: order.event.location || 'Parque de Exposi√ß√µes - Av. Principal, 1000'
                      } 
                    };
                  }
                  return order;
                });
                setOrders(loadedOrders);
              }
            } catch (error) {
              console.log('Primeira vez carregando o sistema');
            }
            setLoading(false);
          }, []);

          // Salvar dados no localStorage
          useEffect(() => {
            if (!loading) {
              localStorage.setItem('events', JSON.stringify(events));
            }
          }, [events, loading]);

          useEffect(() => {
            if (!loading) {
              localStorage.setItem('tickets', JSON.stringify(tickets));
            }
          }, [tickets, loading]);

          useEffect(() => {
            if (!loading && orders.length > 0) {
              localStorage.setItem('orders', JSON.stringify(orders));
            }
          }, [orders, loading]);

          // Gerar QR Codes
          useEffect(() => {
            if (showPrintModal && order) {
              const timer = setTimeout(() => {
                order.items.forEach((item, itemIndex) => {
                  for (let i = 0; i < item.qty; i++) {
                    const containerId = `qr-${itemIndex}-${i}`;
                    const container = document.getElementById(containerId);
                    
                    if (container && container.innerHTML === '') {
                      const ticketCode = `${order.orderId}-${itemIndex}${i}-${Math.random().toString(36).substr(2, 4).toUpperCase()}`;
                      const qrData = `${order.customer.name}|${order.customer.cpf}|TICKET-${ticketCode}`;
                      
                      try {
                        new QRCode(container, {
                          text: qrData,
                          width: 200,
                          height: 200,
                          colorDark: '#000000',
                          colorLight: '#ffffff',
                          correctLevel: QRCode.CorrectLevel.M
                        });
                      } catch (e) {
                        console.error('Erro ao gerar QR:', e);
                      }
                    }
                  }
                });
              }, 300);
              
              return () => clearTimeout(timer);
            }
          }, [showPrintModal, order]);

          const updateCart = (id, qty) => {
            if (qty <= 0) {
              const newCart = {...cart};
              delete newCart[id];
              setCart(newCart);
            } else {
              setCart({...cart, [id]: qty});
            }
          };

          const getTotal = () => {
            return Object.entries(cart).reduce((sum, [id, qty]) => {
              const ticket = tickets.find(t => t.id === parseInt(id));
              return sum + (ticket.price * qty);
            }, 0);
          };

          const getTotalItems = () => Object.values(cart).reduce((a, b) => a + b, 0);

          const login = () => {
            if (email && password) {
              if (email === 'admin@admin.com' && password === 'admin') {
                setUser({ email, name: 'Administrador', isAdmin: true });
                setScreen('admin');
              } else {
                setUser({ email, name: email.split('@')[0], isAdmin: false });
                setScreen('events-list');
              }
            }
          };

          const submitCustomer = () => {
            if (customer.name && customer.email && customer.cpf && customer.phone) {
              setScreen('payment');
            }
          };

          const finalize = () => {
            if (payment === 'pix') {
              setPixCode('00020126580014br.gov.bcb.pix' + Math.random().toString(36).substring(2, 20));
              setScreen('pix');
            } else if (payment === 'credit') {
              completeOrder('Cart√£o de Cr√©dito');
            } else if (payment === 'debit') {
              completeOrder('Cart√£o de D√©bito');
            }
          };

          const confirmPix = () => {
            completeOrder('PIX');
          };

          const completeOrder = (method) => {
            const orderId = 'PED' + Math.random().toString(36).substring(2, 11).toUpperCase();
            const event = events.find(e => e.id === selectedEvent);
            
            if (!event) {
              alert('Erro: Evento n√£o encontrado. Por favor, tente novamente.');
              return;
            }
            
            const newOrder = {
              orderId,
              customer,
              items: Object.entries(cart).map(([id, qty]) => {
                const t = tickets.find(x => x.id === parseInt(id));
                return { name: t.name, qty, price: t.price, ticketId: t.id };
              }),
              total: getTotal(),
              method,
              date: new Date().toLocaleString('pt-BR'),
              event: {
                id: event.id,
                name: event.name,
                date: event.date,
                location: event.location
              }
            };
            setOrder(newOrder);
            setOrders([...orders, newOrder]);
            setScreen('success');
          };

          const downloadTicket = () => {
            setShowPrintModal(true);
          };

          const handlePrint = () => {
            window.print();
          };

          const getSalesStats = (eventId = null) => {
            const filteredOrders = eventId && eventId !== 'all' 
              ? orders.filter(o => o.event && o.event.id === parseInt(eventId))
              : orders;
              
            const stats = {};
            filteredOrders.forEach(order => {
              order.items.forEach(item => {
                if (!stats[item.name]) {
                  stats[item.name] = { qty: 0, revenue: 0 };
                }
                stats[item.name].qty += item.qty;
                stats[item.name].revenue += item.price * item.qty;
              });
            });
            return stats;
          };

          // Event Management
          const addNewEvent = () => {
            if (newEvent.name && newEvent.date && newEvent.location) {
              const id = Math.max(...events.map(e => e.id), 0) + 1;
              setEvents([...events, { id, ...newEvent }]);
              setNewEvent({ name: '', date: '', location: '', description: '' });
              setSuccessMessage('Evento adicionado com sucesso!');
              setTimeout(() => setSuccessMessage(''), 3000);
            }
          };

          const saveEvent = () => {
            if (editingEvent) {
              setEvents(events.map(e => e.id === editingEvent.id ? editingEvent : e));
              setEditingEvent(null);
              setSuccessMessage('Evento atualizado com sucesso!');
              setTimeout(() => setSuccessMessage(''), 3000);
            }
          };

          const deleteEvent = (id) => {
            const eventTickets = tickets.filter(t => t.eventId === id);
            if (eventTickets.length > 0) {
              alert('N√£o √© poss√≠vel excluir este evento pois existem ingressos vinculados a ele!');
              return;
            }
            
            const eventOrders = orders.filter(o => o.event && o.event.id === id);
            if (eventOrders.length > 0) {
              alert('N√£o √© poss√≠vel excluir este evento pois existem pedidos vinculados a ele!');
              return;
            }
            
            if (confirm('Tem certeza que deseja excluir este evento?')) {
              setEvents(events.filter(e => e.id !== id));
              setSuccessMessage('Evento exclu√≠do com sucesso!');
              setTimeout(() => setSuccessMessage(''), 3000);
            }
          };

          // Ticket Management
          const deleteTicket = (id) => {
            if (confirm('Tem certeza que deseja excluir este tipo de ingresso?')) {
              setTickets(tickets.filter(t => t.id !== id));
              setSuccessMessage('Ingresso exclu√≠do com sucesso!');
              setTimeout(() => setSuccessMessage(''), 3000);
            }
          };

          const saveTicket = () => {
            if (editingTicket) {
              setTickets(tickets.map(t => t.id === editingTicket.id ? editingTicket : t));
              setEditingTicket(null);
              setSuccessMessage('Ingresso atualizado com sucesso!');
              setTimeout(() => setSuccessMessage(''), 3000);
            }
          };

          const addNewTicket = () => {
            if (newTicket.name && newTicket.price && newTicket.desc && newTicket.eventId) {
              const id = Math.max(...tickets.map(t => t.id), 0) + 1;
              setTickets([...tickets, { id, ...newTicket, price: parseFloat(newTicket.price) }]);
              setNewTicket({ name: '', price: '', desc: '', eventId: null });
              setSuccessMessage('Novo ingresso adicionado com sucesso!');
              setTimeout(() => setSuccessMessage(''), 3000);
            }
          };

          if (loading) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-yellow-400 to-yellow-600 flex items-center justify-center">
                <div className="text-black text-center">
                  <div className="text-6xl mb-4">üé´</div>
                  <h2 className="text-2xl font-bold">Carregando Sistema...</h2>
                </div>
              </div>
            );
          }

          if (screen === 'login') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-yellow-400 to-yellow-600 flex items-center justify-center p-4">
                <div className="bg-white rounded-lg shadow-2xl p-8 w-full max-w-md border-4 border-black">
                  <h1 className="text-3xl font-bold text-center mb-8 text-black">üé´ Sistema de Ingressos</h1>
                  <input
                    type="email"
                    value={email}
                    onChange={(e) => setEmail(e.target.value)}
                    className="w-full px-4 py-2 border-2 border-black rounded-lg mb-4"
                    placeholder="E-mail"
                  />
                  <input
                    type="password"
                    value={password}
                    onChange={(e) => setPassword(e.target.value)}
                    onKeyPress={(e) => e.key === 'Enter' && login()}
                    className="w-full px-4 py-2 border-2 border-black rounded-lg mb-4"
                    placeholder="Senha"
                  />
                  <button onClick={login} className="w-full bg-yellow-400 text-black border-2 border-black py-3 rounded-lg font-semibold hover:bg-yellow-500 transition">
                    Entrar
                  </button>
                  <p className="text-xs text-gray-500 text-center mt-4">
                    Admin: admin@admin.com / admin
                  </p>
                </div>
              </div>
            );
          }

          if (screen === 'admin') {
            const stats = getSalesStats(reportEventFilter);
            const filteredOrders = reportEventFilter && reportEventFilter !== 'all'
              ? orders.filter(o => o.event && o.event.id === parseInt(reportEventFilter))
              : orders;
            const totalRevenue = filteredOrders.reduce((sum, o) => sum + o.total, 0);
            const totalTickets = filteredOrders.reduce((sum, o) => sum + o.items.reduce((s, i) => s + i.qty, 0), 0);

            return (
              <div className="min-h-screen bg-gray-50">
                {successMessage && (
                  <div className="fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg z-50 flex items-center gap-3 animate-fade-in">
                    <span className="text-2xl">‚úì</span>
                    <span className="font-semibold">{successMessage}</span>
                  </div>
                )}

                <div className="bg-yellow-400 border-b-4 border-black text-black shadow p-4">
                  <div className="max-w-7xl mx-auto flex justify-between items-center">
                    <h1 className="text-2xl font-bold">üé´ Painel Administrativo</h1>
                    <button 
                      onClick={() => { setUser(null); setScreen('login'); }} 
                      className="bg-black text-yellow-400 px-4 py-2 rounded-lg font-semibold hover:bg-gray-900 transition border-2 border-black"
                    >
                      Sair
                    </button>
                  </div>
                </div>

                <div className="max-w-7xl mx-auto p-6">
                  {/* Tabs */}
                  <div className="flex gap-2 mb-6">
                    <button 
                      onClick={() => setAdminTab('events')}
                      className={`px-6 py-3 rounded-lg font-semibold transition border-2 border-black ${adminTab === 'events' ? 'bg-yellow-400 text-black' : 'bg-white text-gray-700 hover:bg-gray-100'}`}
                    >
                      üìÖ Eventos
                    </button>
                    <button 
                      onClick={() => setAdminTab('tickets')}
                      className={`px-6 py-3 rounded-lg font-semibold transition border-2 border-black ${adminTab === 'tickets' ? 'bg-yellow-400 text-black' : 'bg-white text-gray-700 hover:bg-gray-100'}`}
                    >
                      üéüÔ∏è Ingressos
                    </button>
                    <button 
                      onClick={() => setAdminTab('reports')}
                      className={`px-6 py-3 rounded-lg font-semibold transition border-2 border-black ${adminTab === 'reports' ? 'bg-yellow-400 text-black' : 'bg-white text-gray-700 hover:bg-gray-100'}`}
                    >
                      üìä Relat√≥rios
                    </button>
                  </div>

                  {/* Events Tab */}
                  {adminTab === 'events' && (
                    <div className="space-y-6">
                      <div className="bg-white rounded-lg shadow p-6">
                        <h2 className="text-xl font-bold mb-4">üìÖ Gerenciar Eventos</h2>
                        
                        <div className="space-y-4 mb-6">
                          {events.map(event => (
                            <div key={event.id} className="border rounded-lg p-4">
                              {editingEvent?.id === event.id ? (
                                <div className="space-y-3">
                                  <input
                                    type="text"
                                    value={editingEvent.name}
                                    onChange={(e) => setEditingEvent({...editingEvent, name: e.target.value})}
                                    className="w-full px-3 py-2 border rounded"
                                    placeholder="Nome do evento"
                                  />
                                  <input
                                    type="text"
                                    value={editingEvent.date}
                                    onChange={(e) => setEditingEvent({...editingEvent, date: e.target.value})}
                                    className="w-full px-3 py-2 border rounded"
                                    placeholder="Data e hor√°rio"
                                  />
                                  <input
                                    type="text"
                                    value={editingEvent.location}
                                    onChange={(e) => setEditingEvent({...editingEvent, location: e.target.value})}
                                    className="w-full px-3 py-2 border rounded"
                                    placeholder="Local"
                                  />
                                  <textarea
                                    value={editingEvent.description}
                                    onChange={(e) => setEditingEvent({...editingEvent, description: e.target.value})}
                                    className="w-full px-3 py-2 border rounded"
                                    placeholder="Descri√ß√£o"
                                    rows="3"
                                  />
                                  <div className="flex gap-2">
                                    <button
                                      onClick={saveEvent}
                                      className="px-4 py-2 bg-yellow-400 text-black border-2 border-black rounded-lg font-semibold hover:bg-yellow-500 transition"
                                    >
                                      Salvar
                                    </button>
                                    <button
                                      onClick={() => setEditingEvent(null)}
                                      className="px-4 py-2 bg-white text-black border-2 border-black rounded-lg font-semibold hover:bg-gray-100 transition"
                                    >
                                      Cancelar
                                    </button>
                                  </div>
                                </div>
                              ) : (
                                <div className="flex justify-between items-start">
                                  <div className="flex-1">
                                    <h3 className="font-bold text-lg mb-1">{event.name}</h3>
                                    <p className="text-sm text-gray-600 mb-1">üìÖ {event.date}</p>
                                    <p className="text-sm text-gray-600 mb-1">üìç {event.location}</p>
                                    {event.description && (
                                      <p className="text-sm text-gray-500 mt-2">{event.description}</p>
                                    )}
                                    <div className="mt-2 flex gap-2">
                                      <span className="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">
                                        {tickets.filter(t => t.eventId === event.id).length} tipos de ingresso
                                      </span>
                                      <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">
                                        {orders.filter(o => o.event && o.event.id === event.id).length} vendas
                                      </span>
                                    </div>
                                  </div>
                                  <div className="flex gap-2 ml-4">
                                    <button
                                      onClick={() => setEditingEvent({...event})}
                                      className="px-4 py-2 bg-yellow-400 text-black border-2 border-black rounded-lg hover:bg-yellow-500 transition"
                                    >
                                      ‚úèÔ∏è Editar
                                    </button>
                                    <button
                                      onClick={() => deleteEvent(event.id)}
                                      className="px-4 py-2 bg-black text-yellow-400 border-2 border-black rounded-lg hover:bg-gray-900 transition"
                                    >
                                      üóëÔ∏è
                                    </button>
                                  </div>
                                </div>
                              )}
                            </div>
                          ))}
                        </div>

                        <div className="border-t pt-6">
                          <h3 className="font-bold mb-4">‚ûï Adicionar Novo Evento</h3>
                          <div className="space-y-3">
                            <input
                              type="text"
                              value={newEvent.name}
                              onChange={(e) => setNewEvent({...newEvent, name: e.target.value})}
                              className="w-full px-3 py-2 border rounded"
                              placeholder="Nome do evento"
                            />
                            <input
                              type="text"
                              value={newEvent.date}
                              onChange={(e) => setNewEvent({...newEvent, date: e.target.value})}
                              className="w-full px-3 py-2 border rounded"
                              placeholder="Data e hor√°rio (ex: 07 de Fevereiro de 2025 - 20h)"
                            />
                            <input
                              type="text"
                              value={newEvent.location}
                              onChange={(e) => setNewEvent({...newEvent, location: e.target.value})}
                              className="w-full px-3 py-2 border rounded"
                              placeholder="Local (ex: Parque de Exposi√ß√µes - Av. Principal, 1000)"
                            />
                            <textarea
                              value={newEvent.description}
                              onChange={(e) => setNewEvent({...newEvent, description: e.target.value})}
                              className="w-full px-3 py-2 border rounded"
                              placeholder="Descri√ß√£o (opcional)"
                              rows="3"
                            />
                            <button
                              onClick={addNewEvent}
                              className="w-full px-4 py-3 bg-yellow-400 text-black border-2 border-black rounded-lg font-semibold hover:bg-yellow-500 transition"
                            >
                              Adicionar Evento
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  )}

                  {/* Tickets Tab */}
                  {adminTab === 'tickets' && (
                    <div className="space-y-6">
                      <div className="bg-white rounded-lg shadow p-6">
                        <h2 className="text-xl font-bold mb-4">üéüÔ∏è Gerenciar Tipos de Ingressos</h2>
                        
                        {events.length === 0 ? (
                          <div className="text-center py-8 text-gray-500">
                            <p className="mb-2">Nenhum evento cadastrado ainda.</p>
                            <p className="text-sm">Cadastre um evento primeiro na aba "Eventos".</p>
                          </div>
                        ) : (
                          <>
                            <div className="space-y-4 mb-6">
                              {tickets.map(ticket => {
                                const event = events.find(e => e.id === ticket.eventId);
                                return (
                                  <div key={ticket.id} className="border rounded-lg p-4">
                                    {editingTicket?.id === ticket.id ? (
                                      <div className="space-y-3">
                                        <select
                                          value={editingTicket.eventId}
                                          onChange={(e) => setEditingTicket({...editingTicket, eventId: parseInt(e.target.value)})}
                                          className="w-full px-3 py-2 border rounded"
                                        >
                                          <option value="">Selecione o evento</option>
                                          {events.map(e => (
                                            <option key={e.id} value={e.id}>{e.name}</option>
                                          ))}
                                        </select>
                                        <input
                                          type="text"
                                          value={editingTicket.name}
                                          onChange={(e) => setEditingTicket({...editingTicket, name: e.target.value})}
                                          className="w-full px-3 py-2 border rounded"
                                          placeholder="Nome do ingresso"
                                        />
                                        <input
                                          type="number"
                                          value={editingTicket.price}
                                          onChange={(e) => setEditingTicket({...editingTicket, price: parseFloat(e.target.value)})}
                                          className="w-full px-3 py-2 border rounded"
                                          placeholder="Pre√ßo"
                                        />
                                        <input
                                          type="text"
                                          value={editingTicket.desc}
                                          onChange={(e) => setEditingTicket({...editingTicket, desc: e.target.value})}
                                          className="w-full px-3 py-2 border rounded"
                                          placeholder="Descri√ß√£o"
                                        />
                                        <div className="flex gap-2">
                                          <button
                                            onClick={saveTicket}
                                            className="px-4 py-2 bg-yellow-400 text-black border-2 border-black rounded-lg font-semibold hover:bg-yellow-500 transition"
                                          >
                                            Salvar
                                          </button>
                                          <button
                                            onClick={() => setEditingTicket(null)}
                                            className="px-4 py-2 bg-white text-black border-2 border-black rounded-lg font-semibold hover:bg-gray-100 transition"
                                          >
                                            Cancelar
                                          </button>
                                        </div>
                                      </div>
                                    ) : (
                                      <div className="flex justify-between items-center">
                                        <div className="flex-1">
                                          <div className="flex items-center gap-2 mb-2">
                                            <h3 className="font-bold text-lg">{ticket.name}</h3>
                                            {event && (
                                              <span className="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded">
                                                {event.name}
                                              </span>
                                            )}
                                          </div>
                                          <p className="text-sm text-gray-600">{ticket.desc}</p>
                                          <p className="text-lg font-semibold text-yellow-600 mt-1">R$ {ticket.price.toFixed(2)}</p>
                                        </div>
                                        <div className="flex gap-2">
                                          <button
                                            onClick={() => setEditingTicket({...ticket})}
                                            className="px-4 py-2 bg-yellow-400 text-black border-2 border-black rounded-lg hover:bg-yellow-500 transition"
                                          >
                                            ‚úèÔ∏è Editar
                                          </button>
                                          <button
                                            onClick={() => deleteTicket(ticket.id)}
                                            className="px-4 py-2 bg-black text-yellow-400 border-2 border-black rounded-lg hover:bg-gray-900 transition"
                                          >
                                            üóëÔ∏è
                                          </button>
                                        </div>
                                      </div>
                                    )}
                                  </div>
                                );
                              })}
                            </div>

                            <div className="border-t pt-6">
                              <h3 className="font-bold mb-4">‚ûï Adicionar Novo Tipo de Ingresso</h3>
                              <div className="space-y-3">
                                <select
                                  value={newTicket.eventId || ''}
                                  onChange={(e) => setNewTicket({...newTicket, eventId: parseInt(e.target.value)})}
                                  className="w-full px-3 py-2 border rounded"
                                >
                                  <option value="">Selecione o evento *</option>
                                  {events.map(e => (
                                    <option key={e.id} value={e.id}>{e.name}</option>
                                  ))}
                                </select>
                                <input
                                  type="text"
                                  value={newTicket.name}
                                  onChange={(e) => setNewTicket({...newTicket, name: e.target.value})}
                                  className="w-full px-3 py-2 border rounded"
                                  placeholder="Nome do ingresso"
                                />
                                <input
                                  type="number"
                                  value={newTicket.price}
                                  onChange={(e) => setNewTicket({...newTicket, price: e.target.value})}
                                  className="w-full px-3 py-2 border rounded"
                                  placeholder="Pre√ßo"
                                />
                                <input
                                  type="text"
                                  value={newTicket.desc}
                                  onChange={(e) => setNewTicket({...newTicket, desc: e.target.value})}
                                  className="w-full px-3 py-2 border rounded"
                                  placeholder="Descri√ß√£o"
                                />
                                <button
                                  onClick={addNewTicket}
                                  className="w-full px-4 py-3 bg-yellow-400 text-black border-2 border-black rounded-lg font-semibold hover:bg-yellow-500 transition"
                                >
                                  Adicionar Ingresso
                                </button>
                              </div>
                            </div>
                          </>
                        )}
                      </div>
                    </div>
                  )}

                  {/* Reports Tab */}
                  {adminTab === 'reports' && (
                    <div className="space-y-6">
                      {/* Filtro por Evento */}
                      <div className="bg-white rounded-lg shadow p-6">
                        <label className="block font-semibold mb-2">Filtrar por Evento:</label>
                        <select
                          value={reportEventFilter}
                          onChange={(e) => setReportEventFilter(e.target.value)}
                          className="w-full px-4 py-2 border rounded-lg"
                        >
                          <option value="all">Todos os Eventos</option>
                          {events.map(e => (
                            <option key={e.id} value={e.id}>{e.name}</option>
                          ))}
                        </select>
                      </div>

                      {/* Cards de Estat√≠sticas */}
                      <div className="grid md:grid-cols-3 gap-6">
                        <div className="bg-white rounded-lg shadow p-6 border-2 border-black">
                          <div className="flex items-center justify-between">
                            <div>
                              <p className="text-gray-600 text-sm">Total de Vendas</p>
                              <p className="text-3xl font-bold text-yellow-600">R$ {totalRevenue.toFixed(2)}</p>
                            </div>
                            <div className="text-4xl">üí∞</div>
                          </div>
                        </div>
                        <div className="bg-white rounded-lg shadow p-6 border-2 border-black">
                          <div className="flex items-center justify-between">
                            <div>
                              <p className="text-gray-600 text-sm">Pedidos</p>
                              <p className="text-3xl font-bold text-black">
{filteredOrders.length}</p>
                            </div>
                            <div className="text-4xl">üì¶</div>
                          </div>
                        </div>
                        <div className="bg-white rounded-lg shadow p-6 border-2 border-black">
                          <div className="flex items-center justify-between">
                            <div>
                              <p className="text-gray-600 text-sm">Ingressos Vendidos</p>
                              <p className="text-3xl font-bold text-yellow-600">{totalTickets}</p>
                            </div>
                            <div className="text-4xl">üéüÔ∏è</div>
                          </div>
                        </div>
                      </div>

                      {/* Vendas por Tipo */}
                      <div className="bg-white rounded-lg shadow p-6">
                        <h2 className="text-xl font-bold mb-4">üìä Vendas por Tipo de Ingresso</h2>
                        {Object.keys(stats).length === 0 ? (
                          <p className="text-gray-500 text-center py-8">Nenhuma venda realizada ainda</p>
                        ) : (
                          <div className="space-y-4">
                            {Object.entries(stats).map(([name, data]) => (
                              <div key={name} className="border-b pb-4">
                                <div className="flex justify-between items-center mb-2">
                                  <h3 className="font-semibold">{name}</h3>
                                  <span className="text-2xl font-bold text-yellow-600">R$ {data.revenue.toFixed(2)}</span>
                                </div>
                                <div className="flex justify-between text-sm text-gray-600">
                                  <span>{data.qty} ingressos vendidos</span>
                                  <span>M√©dia: R$ {(data.revenue / data.qty).toFixed(2)}</span>
                                </div>
                              </div>
                            ))}
                          </div>
                        )}
                      </div>

                      {/* Hist√≥rico de Pedidos */}
                      <div className="bg-white rounded-lg shadow p-6">
                        <h2 className="text-xl font-bold mb-4">üìã Hist√≥rico de Pedidos</h2>
                        {filteredOrders.length === 0 ? (
                          <p className="text-gray-500 text-center py-8">Nenhum pedido realizado ainda</p>
                        ) : (
                          <div className="space-y-4">
                            {filteredOrders.map((o, idx) => (
                              <div key={idx} className="border rounded-lg p-4">
                                <div className="flex justify-between items-start mb-2">
                                  <div>
                                    <p className="font-bold text-lg">{o.orderId}</p>
                                    {o.event && <p className="text-sm text-yellow-600 font-semibold">{o.event.name}</p>}
                                    <p className="text-sm text-gray-600">{o.customer.name} - {o.customer.email}</p>
                                    <p className="text-xs text-gray-500">{o.date}</p>
                                  </div>
                                  <div className="text-right">
                                    <p className="text-2xl font-bold text-yellow-600">R$ {o.total.toFixed(2)}</p>
                                    <p className="text-xs text-gray-600">{o.method}</p>
                                  </div>
                                </div>
                                <div className="border-t pt-2 mt-2">
                                  {o.items.map((item, i) => (
                                    <div key={i} className="flex justify-between text-sm py-1">
                                      <span>{item.qty}x {item.name}</span>
                                      <span>R$ {(item.price * item.qty).toFixed(2)}</span>
                                    </div>
                                  ))}
                                </div>
                              </div>
                            ))}
                          </div>
                        )}
                      </div>
                    </div>
                  )}
                </div>
              </div>
            );
          }

          // Tela de sele√ß√£o de eventos para o cliente
          if (screen === 'events-list') {
            return (
              <div className="min-h-screen bg-gray-50">
                <div className="bg-yellow-400 border-b-4 border-black shadow p-4">
                  <div className="flex justify-between items-center">
                    <h1 className="text-2xl font-bold text-black">Eventos Dispon√≠veis - Ol√°, {user.name}</h1>
                    <button 
                      onClick={() => { setUser(null); setScreen('login'); }} 
                      className="text-black font-semibold hover:text-gray-700"
                    >
                      Sair
                    </button>
                  </div>
                </div>
                <div className="max-w-6xl mx-auto p-6">
                  {events.length === 0 ? (
                    <div className="bg-white rounded-lg shadow p-8 text-center">
                      <p className="text-gray-500 text-lg">Nenhum evento dispon√≠vel no momento.</p>
                    </div>
                  ) : (
                    <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                      {events.map(event => {
                        const eventTickets = tickets.filter(t => t.eventId === event.id);
                        return (
                          <div key={event.id} className="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition border-2 border-black">
                            <div className="bg-gradient-to-r from-yellow-400 to-yellow-600 p-6 text-black border-b-4 border-black">
                              <h2 className="text-2xl font-bold mb-2">{event.name}</h2>
                              <p className="text-sm opacity-90">üìÖ {event.date}</p>
                            </div>
                            <div className="p-6">
                              <p className="text-sm text-gray-600 mb-2">üìç {event.location}</p>
                              {event.description && (
                                <p className="text-sm text-gray-500 mb-4">{event.description}</p>
                              )}
                              <div className="flex items-center justify-between mb-4">
                                <span className="text-sm text-gray-600">
                                  {eventTickets.length} {eventTickets.length === 1 ? 'tipo de ingresso' : 'tipos de ingresso'}
                                </span>
                                {eventTickets.length > 0 && (
                                  <span className="text-sm font-semibold text-yellow-600">
                                    A partir de R$ {Math.min(...eventTickets.map(t => t.price)).toFixed(2)}
                                  </span>
                                )}
                              </div>
                              {eventTickets.length > 0 ? (
                                <button 
                                  onClick={() => { setSelectedEvent(event.id); setScreen('tickets'); }}
                                  className="w-full bg-yellow-400 text-black border-2 border-black py-3 rounded-lg font-semibold hover:bg-yellow-500 transition"
                                >
                                  Comprar Ingressos
                                </button>
                              ) : (
                                <button 
                                  disabled
                                  className="w-full bg-gray-300 text-gray-500 py-3 rounded-lg font-semibold cursor-not-allowed border-2 border-gray-400"
                                >
                                  Ingressos indispon√≠veis
                                </button>
                              )}
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  )}
                </div>
              </div>
            );
          }

          if (screen === 'tickets') {
            const currentEvent = events.find(e => e.id === selectedEvent);
            const eventTickets = tickets.filter(t => t.eventId === selectedEvent);

            if (!currentEvent) {
              return (
                <div className="min-h-screen bg-gray-50 flex items-center justify-center">
                  <div className="text-center">
                    <p className="text-gray-600 mb-4">Evento n√£o encontrado</p>
                    <button 
                      onClick={() => setScreen('events-list')} 
                      className="bg-yellow-400 text-black border-2 border-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500 transition"
                    >
                      Voltar aos Eventos
                    </button>
                  </div>
                </div>
              );
            }

            return (
              <div className="min-h-screen bg-gray-50">
                <div className="bg-yellow-400 border-b-4 border-black shadow p-4">
                  <div className="flex justify-between items-center">
                    <div>
                      <h1 className="text-2xl font-bold text-black">{currentEvent?.name}</h1>
                      <p className="text-sm text-gray-800">üìÖ {currentEvent?.date} | üìç {currentEvent?.location}</p>
                    </div>
                    <button 
                      onClick={() => { setCart({}); setScreen('events-list'); }} 
                      className="text-black font-semibold hover:text-gray-700"
                    >
                      ‚Üê Voltar aos Eventos
                    </button>
                  </div>
                </div>
                <div className="max-w-6xl mx-auto p-4">
                  <div className="grid md:grid-cols-3 gap-4">
                    <div className="md:col-span-2 space-y-4">
                      {eventTickets.length === 0 ? (
                        <div className="bg-white rounded-lg shadow p-8 text-center border-2 border-black">
                          <p className="text-gray-500 text-lg mb-4">Nenhum ingresso dispon√≠vel para este evento.</p>
                          <button 
                            onClick={() => setScreen('events-list')} 
                            className="bg-yellow-400 text-black border-2 border-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500 transition"
                          >
                            Voltar aos Eventos
                          </button>
                        </div>
                      ) : (
                        eventTickets.map(t => (
                          <div key={t.id} className="bg-white rounded-lg shadow p-4 border-2 border-black">
                            <div className="flex justify-between mb-4">
                              <div>
                                <h3 className="font-bold">{t.name}</h3>
                                <p className="text-sm text-gray-600">{t.desc}</p>
                              </div>
                              <p className="text-xl font-bold text-yellow-600">R$ {t.price}</p>
                            </div>
                            <div className="flex items-center gap-3">
                              <button onClick={() => updateCart(t.id, (cart[t.id] || 0) - 1)} className="w-10 h-10 bg-gray-200 rounded-lg hover:bg-gray-300 transition border-2 border-black" disabled={!cart[t.id]}>-</button>
                              <span className="w-12 text-center font-bold">{cart[t.id] || 0}</span>
                              <button onClick={() => updateCart(t.id, (cart[t.id] || 0) + 1)} className="w-10 h-10 bg-yellow-400 text-black border-2 border-black rounded-lg hover:bg-yellow-500 transition">+</button>
                            </div>
                          </div>
                        ))
                      )}
                    </div>
                    <div className="bg-white rounded-lg shadow p-4 border-2 border-black">
                      <h3 className="font-bold mb-4">Carrinho</h3>
                      {getTotalItems() === 0 ? (
                        <p className="text-gray-500 text-center py-8">Vazio</p>
                      ) : (
                        <>
                          {Object.entries(cart).map(([id, qty]) => {
                            const t = tickets.find(x => x.id === parseInt(id));
                            return (
                              <div key={id} className="flex justify-between text-sm mb-2">
                                <span>{qty}x {t.name}</span>
                                <span>R$ {(t.price * qty).toFixed(2)}</span>
                              </div>
                            );
                          })}
                          <div className="border-t pt-2 mt-2 flex justify-between font-bold">
                            <span>Total</span>
                            <span className="text-xl text-yellow-600">R$ {getTotal().toFixed(2)}</span>
                          </div>
                          <button onClick={() => setScreen('customer')} className="w-full bg-yellow-400 text-black border-2 border-black py-3 rounded-lg font-semibold mt-4 hover:bg-yellow-500 transition">
                            Continuar
                          </button>
                        </>
                      )}
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          if (screen === 'customer') {
            return (
              <div className="min-h-screen bg-gray-50 p-4">
                <div className="max-w-6xl mx-auto">
                  <button onClick={() => setScreen('tickets')} className="text-black font-semibold mb-4 hover:text-gray-700 border-2 border-black bg-yellow-400 px-4 py-2 rounded-lg">‚Üê Voltar</button>
                  
                  <div className="grid md:grid-cols-3 gap-6">
                    <div className="md:col-span-2">
                      <div className="bg-white rounded-lg shadow p-6 border-2 border-black">
                        <h2 className="text-2xl font-bold mb-2">Informa√ß√µes do Cliente</h2>
                        <p className="text-gray-600 text-sm mb-6">Preencha seus dados para continuar com a compra</p>
                        
                        <div className="space-y-4">
                          <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">Nome Completo *</label>
                            <input 
                              type="text" 
                              placeholder="Ex: Jo√£o Silva Santos" 
                              value={customer.name} 
                              onChange={(e) => setCustomer({...customer, name: e.target.value})} 
                              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            />
                          </div>
                          <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">CPF *</label>
                            <input 
                              type="text" 
                              placeholder="Ex: 12345678900" 
                              value={customer.cpf} 
                              onChange={(e) => setCustomer({...customer, cpf: e.target.value})} 
                              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                              maxLength="11"
                            />
                            <p className="text-xs text-gray-500 mt-1">Somente n√∫meros, sem pontos ou tra√ßos</p>
                          </div>
                          <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">E-mail *</label>
                            <input 
                              type="email" 
                              placeholder="Ex: joao@email.com" 
                              value={customer.email} 
                              onChange={(e) => setCustomer({...customer, email: e.target.value})} 
                              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            />
                            <p className="text-xs text-gray-500 mt-1">Voc√™ receber√° o comprovante neste e-mail</p>
                          </div>
                          <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">Telefone *</label>
                            <input 
                              type="tel" 
                              placeholder="Ex: 11987654321" 
                              value={customer.phone} 
                              onChange={(e) => setCustomer({...customer, phone: e.target.value})} 
                              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            />
                            <p className="text-xs text-gray-500 mt-1">DDD + n√∫mero (somente n√∫meros)</p>
                          </div>
                        </div>
                        <button 
                          onClick={submitCustomer} 
                          className="w-full bg-yellow-400 border-2 border-black hover:bg-yellow-500 text-black py-4 rounded-lg font-semibold mt-6 transition duration-200"
                        >
                          Continuar para Pagamento ‚Üí
                        </button>
                      </div>
                    </div>
                    <div className="md:col-span-1">
                      <div className="bg-white rounded-lg shadow p-6 sticky top-4 border-2 border-black">
                        <h3 className="text-xl font-bold mb-4 flex items-center">
                          <span className="mr-2">üõí</span>
                          Resumo do Pedido
                        </h3>
                        <div className="space-y-3 mb-4">
                          {Object.entries(cart).map(([id, qty]) => {
                            const t = tickets.find(x => x.id === parseInt(id));
                            return (
                              <div key={id} className="pb-3 border-b border-gray-200">
                                <div className="flex justify-between items-start mb-1">
                                  <span className="font-semibold text-sm">{t.name}</span>
                                  <span className="font-bold text-yellow-600">R$ {(t.price * qty).toFixed(2)}</span>
                                </div>
                                <div className="flex justify-between text-xs text-gray-600">
                                  <span>{qty} {qty === 1 ? 'ingresso' : 'ingressos'}</span>
                                  <span>R$ {t.price.toFixed(2)} cada</span>
                                </div>
                              </div>
                            );
                          })}
                        </div>
                        <div className="border-t-2 border-gray-300 pt-4 mb-4">
                          <div className="flex justify-between items-center">
                            <span className="text-lg font-bold">Total</span>
                            <span className="text-2xl font-bold text-yellow-600">R$ {getTotal().toFixed(2)}</span>
                          </div>
                          <p className="text-xs text-gray-500 mt-2 text-center">
                            {getTotalItems()} {getTotalItems() === 1 ? 'ingresso' : 'ingressos'} selecionado{getTotalItems() === 1 ? '' : 's'}
                          </p>
                        </div>
                        <div className="bg-yellow-50 border-2 border-yellow-400 rounded-lg p-3">
                          <p className="text-xs text-black text-center font-semibold">
                            ‚úì Seus ingressos ser√£o enviados por e-mail ap√≥s a confirma√ß√£o do pagamento
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          if (screen === 'payment') {
            return (
              <div className="min-h-screen bg-gray-50 p-4">
                <div className="max-w-4xl mx-auto">
                  <button onClick={() => setScreen('customer')} className="text-black font-semibold mb-4 hover:text-gray-700 border-2 border-black bg-yellow-400 px-4 py-2 rounded-lg">‚Üê Voltar</button>
                  <div className="bg-white rounded-lg shadow p-6 border-2 border-black">
                    <h2 className="text-xl font-bold mb-4">Pagamento</h2>
                    {payments.map(p => (
                      <div key={p.id} onClick={() => setPayment(p.id)} className={'p-4 border-2 rounded-lg cursor-pointer mb-3 transition ' + (payment === p.id ? 'border-yellow-400 bg-yellow-50' : 'hover:border-yellow-300 border-black')}>
                        <span className="text-2xl mr-3">{p.icon}</span>
                        <span className="font-semibold">{p.name}</span>
                      </div>
                    ))}
                    <button onClick={finalize} disabled={!payment} className={'w-full py-3 rounded-lg font-semibold transition border-2 ' + (payment ? 'bg-yellow-400 text-black border-black hover:bg-yellow-500' : 'bg-gray-300 text-gray-500 cursor-not-allowed border-gray-400')}>
                      Finalizar
                    </button>
                  </div>
                </div>
              </div>
            );
          }

          if (screen === 'pix') {
            return (
              <div className="min-h-screen bg-gray-50 flex items-center justify-center p-4">
                <div className="bg-white rounded-lg shadow-xl p-8 max-w-md w-full border-4 border-black">
                  <h2 className="text-2xl font-bold text-center mb-6">Pagamento PIX</h2>
                  <div className="bg-gray-100 p-4 rounded mb-6 border-2 border-black">
                    <p className="text-xs font-mono break-all">{pixCode}</p>
                  </div>
                  <button onClick={confirmPix} className="w-full bg-yellow-400 text-black border-2 border-black py-3 rounded-lg font-semibold hover:bg-yellow-500 transition">
                    Confirmar
                  </button>
                </div>
              </div>
            );
          }

          if (screen === 'success') {
            const event = selectedEvent ? events.find(e => e.id === selectedEvent) : null;
            return (
              <>
                {showPrintModal && (
                  <div className="print-content" style={{position: 'fixed', inset: 0, background: 'rgba(0, 0, 0, 0.9)', zIndex: 9999, overflowY: 'auto', padding: 0}}>
                    <div style={{maxWidth: '900px', margin: '0 auto', background: '#f5f5f5', padding: '20px'}}>
                      {order.items.map((item, itemIndex) => 
                        Array.from({ length: item.qty }).map((_, i) => {
                          const ticketNum = order.items.slice(0, itemIndex).reduce((acc, it) => acc + it.qty, 0) + i + 1;
                          return (
                            <div key={`ticket-${itemIndex}-${i}`} className="ticket-page" style={{marginBottom: '20px', background: 'white'}}>
                              <div style={{textAlign: 'center', borderBottom: '3px solid #000', paddingBottom: '20px', marginBottom: '30px'}}>
                                <h1 style={{color: '#000', fontSize: '32px', margin: 0, fontWeight: 'bold'}}>üé´ INGRESSO</h1>
                                <p style={{color: '#666', marginTop: '10px', fontSize: '18px', fontWeight: '600'}}>{order.event.name}</p>
                                <p style={{color: '#999', fontSize: '14px', marginTop: '5px'}}>{order.event.date}</p>
                              </div>
                              <div style={{background: '#f9fafb', borderRadius: '12px', padding: '25px', marginBottom: '30px', border: '2px solid #000'}}>
                                <h2 style={{color: '#374151', fontSize: '18px', marginTop: 0, marginBottom: '15px', borderBottom: '2px solid #EAB308', paddingBottom: '8px'}}>
                                  üë§ Dados do Comprador
                                </h2>
                                <div style={{display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px', fontSize: '14px'}}>
                                  <div>
                                    <p style={{color: '#6b7280', margin: '0 0 5px 0', fontSize: '12px'}}>Nome:</p>
                                    <p style={{color: '#111', margin: 0, fontWeight: 'bold'}}>{order.customer.name}</p>
                                  </div>
                                  <div>
                                    <p style={{color: '#6b7280', margin: '0 0 5px 0', fontSize: '12px'}}>CPF:</p>
                                    <p style={{color: '#111', margin: 0, fontWeight: 'bold'}}>{order.customer.cpf}</p>
                                  </div>
                                  <div>
                                    <p style={{color: '#6b7280', margin: '0 0 5px 0', fontSize: '12px'}}>E-mail:</p>
                                    <p style={{color: '#111', margin: 0, fontWeight: 'bold', fontSize: '13px'}}>{order.customer.email}</p>
                                  </div>
                                  <div>
                                    <p style={{color: '#6b7280', margin: '0 0 5px 0', fontSize: '12px'}}>Telefone:</p>
                                    <p style={{color: '#111', margin: 0, fontWeight: 'bold'}}>{order.customer.phone}</p>
                                  </div>
                                </div>
                              </div>
                              <div style={{background: 'linear-gradient(135deg, #EAB308 0%, #CA8A04 100%)', borderRadius: '12px', padding: '20px', marginBottom: '30px', textAlign: 'center', color: '#000', border: '2px solid #000'}}>
                                <p style={{margin: 0, fontSize: '14px', opacity: 0.9}}>Categoria</p>
                                <h2 style={{margin: '5px 0', fontSize: '28px', fontWeight: 'bold'}}>{item.name}</h2>
                                <p style={{margin: '5px 0 0 0', fontSize: '16px', opacity: 0.9}}>{"R$ " + item.price.toFixed(2)}</p>
                              </div>
                              <div style={{textAlign: 'center', background: '#f9fafb', borderRadius: '12px', padding: '30px', marginBottom: '30px', border: '2px solid #000'}}>
                                <h3 style={{color: '#374151', marginTop: 0, fontSize: '18px'}}>üì± C√≥digo de Valida√ß√£o</h3>
                                <p style={{color: '#6b7280', fontSize: '13px', marginBottom: '20px'}}>Apresente este QR Code na entrada do evento</p>
                                <div id={`qr-${itemIndex}-${i}`} style={{minHeight: '200px', display: 'flex', justifyContent: 'center', alignItems: 'center', marginBottom: '15px'}}></div>
                                <div style={{background: '#fef3c7', borderRadius: '8px', padding: '12px', marginTop: '15px', border: '2px solid #EAB308'}}>
                                  <p style={{margin: 0, fontSize: '11px', color: '#000', fontFamily: 'monospace', fontWeight: 'bold'}}>
                                    Ingresso #{ticketNum} | {order.orderId}
                                  </p>
                                </div>
                              </div>
                              <div style={{borderTop: '2px dashed #d1d5db', paddingTop: '20px'}}>
                                <div style={{display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', fontSize: '12px', color: '#6b7280'}}>
                                  <div>
                                    <p style={{margin: '0 0 5px 0', fontWeight: 'bold', color: '#374151'}}>üìç Local:</p>
                                    <p style={{margin: 0}}>{order.event.location}</p>
                                  </div>
                                  <div>
                                    <p style={{margin: '0 0 5px 0', fontWeight: 'bold', color: '#374151'}}>‚è∞ Data:</p>
                                    <p style={{margin: 0}}>{order.event.date}</p>
                                  </div>
                                </div>
                                <div style={{marginTop: '15px', padding: '12px', background: '#fef3c7', borderRadius: '6px', border: '1px solid #fbbf24'}}>
                                  <p style={{margin: 0, fontSize: '11px', color: '#92400e', textAlign: 'center'}}>
                                    ‚ö†Ô∏è Este ingresso √© pessoal e intransfer√≠vel. √â obrigat√≥ria a apresenta√ß√£o de documento com foto na entrada.
                                  </p>
                                </div>
                              </div>
                              <div style={{marginTop: '20px', textAlign: 'center', fontSize: '11px', color: '#9ca3af'}}>
                                <p style={{margin: 0}}>Data da compra: {order.date}</p>
                                <p style={{margin: '5px 0 0 0'}}>Suporte: suporte@ingressos.com</p>
                              </div>
                            </div>
                          );
                        })
                      )}
                      <div className="no-print-btn" style={{textAlign: 'center', background: 'white', borderRadius: '8px', padding: '30px', marginTop: '20px'}}>
                        <div style={{marginBottom: '20px'}}>
                          <p style={{fontSize: '18px', fontWeight: 'bold', color: '#374151', marginBottom: '10px'}}>
                            ‚úÖ Ingressos Prontos para Impress√£o
                          </p>
                          <p style={{color: '#666', fontSize: '14px'}}>
                            {order.items.reduce((acc, item) => acc + item.qty, 0)} {order.items.reduce((acc, item) => acc + item.qty, 0) === 1 ? 'ingresso ser√° impresso' : 'ingressos ser√£o impressos'}
                          </p>
                        </div>
                        <button onClick={handlePrint} style={{background: '#EAB308', color: '#000', border: '2px solid #000', padding: '15px 40px', borderRadius: '8px', cursor: 'pointer', fontSize: '16px', fontWeight: 'bold', marginRight: '10px', boxShadow: '0 4px 6px rgba(0, 0, 0, 0.3)'}}>
                          üñ®Ô∏è Imprimir Todos os Ingressos
                        </button>
                        <button onClick={() => setShowPrintModal(false)} style={{background: '#000', color: '#EAB308', border: '2px solid #000', padding: '15px 40px', borderRadius: '8px', cursor: 'pointer', fontSize: '16px', fontWeight: 'bold'}}>
                          Fechar
                        </button>
                      </div>
                    </div>
                  </div>
                )}
                <div className="min-h-screen bg-gradient-to-br from-yellow-50 to-gray-50 flex items-center justify-center p-4">
                  <div className="max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8 border-4 border-black">
                    <div className="text-center mb-6">
                      <div className="text-5xl mb-4">‚úÖ</div>
                      <h1 className="text-3xl font-bold text-yellow-600 mb-2">Pagamento Confirmado!</h1>
                      <p className="text-gray-600">Pedido: {order.orderId}</p>
                      {event && <p className="text-black font-semibold">{event.name}</p>}
                    </div>
                    <div className="mb-6">
                      <h3 className="font-bold mb-3">Ingressos:</h3>
                      {order.items.map((item, i) => (
                        <div key={i} className="flex justify-between py-2 border-b">
                          <span>{item.qty}x {item.name}</span>
                          <span className="font-bold">R$ {(item.price * item.qty).toFixed(2)}</span>
                        </div>
                      ))}
                    </div>
                    <div className="bg-yellow-50 border-2 border-yellow-400 rounded-lg p-4 mb-6">
                      <div className="flex justify-between mb-3">
                        <span className="font-bold text-lg">Total:</span>
                        <span className="font-bold text-2xl text-yellow-600">R$ {order.total.toFixed(2)}</span>
                      </div>
                      <div className="bg-yellow-100 border-2 border-yellow-400 rounded p-3 mt-3">
                        <p className="text-xs text-black text-center font-semibold">
                          ‚úì Cada ingresso ser√° impresso em uma p√°gina separada
                        </p>
                      </div>
                    </div>
                    <div className="space-y-3">
                      <button onClick={downloadTicket} className="w-full bg-yellow-400 text-black border-2 border-black py-3 rounded-lg font-semibold hover:bg-yellow-500 transition">
                        üñ®Ô∏è Ver e Imprimir Ingressos
                      </button>
                      <button onClick={() => { setCart({}); setPayment(''); setOrder(null); setCustomer({ name: '', phone: '', email: '', cpf: '' }); setSelectedEvent(null); setScreen('events-list'); }} className="w-full bg-black text-yellow-400 border-2 border-black py-3 rounded-lg font-semibold hover:bg-gray-900 transition">
                        Nova Compra
                      </button>
                    </div>
                  </div>
                </div>
              </>
            );
          }

          return null;
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>